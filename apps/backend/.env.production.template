# ============================================================================
# LUNEO BACKEND - PRODUCTION ENVIRONMENT
# ============================================================================
# Configurer dans Railway Dashboard > Variables
# Toutes les variables marquées [OBLIGATOIRE] doivent être remplies
# ============================================================================

# --- Application ---
NODE_ENV=production
PORT=3000
API_PREFIX=/api/v1

# --- Database [OBLIGATOIRE] ---
# Railway fournit automatiquement cette variable si vous ajoutez un service PostgreSQL
DATABASE_URL=postgresql://postgres:PASSWORD@HOST:PORT/railway?schema=public&sslmode=require&connection_limit=20

# --- Redis [OBLIGATOIRE] ---
# Option 1: Railway Redis (ajouter un service Redis dans Railway)
# Railway fournit REDIS_URL automatiquement
# Option 2: Upstash Redis (https://console.upstash.com)
REDIS_URL=redis://default:PASSWORD@HOST:PORT
# Upstash REST API (optionnel, pour edge functions)
# UPSTASH_REDIS_REST_URL=https://xxxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxxx

# --- JWT [PRE-GENERE - NE PAS MODIFIER] ---
JWT_SECRET=28964ca4b32025aade3e4f048e4cc2e301f9822e762add096dea9d22111127ca01884b3205e83780bbbe5b54eb2dde12f200627010afa72d66727ba1d89425d2
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=122eafd20364da9dbd67214f25f0e54bb55cc1a5b7c4162ac1433d3e7944e56eaea8a4e7be0769227917cc7e11ffda6ea1b0530b278e4f001ed07833b03a6f77
JWT_REFRESH_EXPIRES_IN=7d
JWT_RESET_SECRET=78025168240bc9da29dac135f6703368d32c6b5aecaff8ee82e92ea98bb148791cdb2bf942cf9d8d2fc6ca2b7c7daf6a4d48cb473d7159ac7a001955f48cdee4

# --- Encryption [PRE-GENERE] ---
ENCRYPTION_KEY=50bb71d97ec41bc19bebcf315d1de25edd67680161907ed1f8cd49fee93d8e0e

# --- URLs [OBLIGATOIRE] ---
FRONTEND_URL=https://luneo.app
BACKEND_URL=https://api.luneo.app
CORS_ORIGIN=https://luneo.app,https://www.luneo.app
CORS_ORIGINS=https://luneo.app,https://www.luneo.app

# --- Stripe [OBLIGATOIRE pour billing] ---
# Obtenir sur https://dashboard.stripe.com/apikeys (mode LIVE)
STRIPE_SECRET_KEY=sk_live_VOTRE_CLE_ICI
STRIPE_WEBHOOK_SECRET=whsec_VOTRE_WEBHOOK_SECRET_ICI
STRIPE_PUBLISHABLE_KEY=pk_live_VOTRE_CLE_ICI

# Prix (créer dans Stripe Dashboard > Products)
STRIPE_PRICE_STARTER_MONTHLY=price_xxxxx
STRIPE_PRICE_STARTER_YEARLY=price_xxxxx
STRIPE_PRICE_PRO_MONTHLY=price_xxxxx
STRIPE_PRICE_PRO_YEARLY=price_xxxxx
STRIPE_PRICE_BUSINESS_MONTHLY=price_xxxxx
STRIPE_PRICE_BUSINESS_YEARLY=price_xxxxx
STRIPE_PRICE_ENTERPRISE_MONTHLY=price_xxxxx
STRIPE_PRICE_ENTERPRISE_YEARLY=price_xxxxx

STRIPE_SUCCESS_URL=https://luneo.app/dashboard/billing/success
STRIPE_CANCEL_URL=https://luneo.app/dashboard/billing/cancel

# --- Cloudinary [OBLIGATOIRE pour images] ---
# Obtenir sur https://console.cloudinary.com
CLOUDINARY_CLOUD_NAME=VOTRE_CLOUD_NAME
CLOUDINARY_API_KEY=VOTRE_API_KEY
CLOUDINARY_API_SECRET=VOTRE_API_SECRET

# --- SendGrid [OBLIGATOIRE pour emails] ---
# Obtenir sur https://app.sendgrid.com > Settings > API Keys
SENDGRID_API_KEY=SG.VOTRE_CLE_ICI
SENDGRID_DOMAIN=luneo.app
SENDGRID_FROM_NAME=Luneo
SENDGRID_FROM_EMAIL=no-reply@luneo.app
SENDGRID_REPLY_TO=support@luneo.app
FROM_EMAIL=no-reply@luneo.app

# SMTP via SendGrid (fallback)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=SG.VOTRE_CLE_ICI
SMTP_FROM=Luneo <no-reply@luneo.app>

# --- OAuth [OBLIGATOIRE pour login social] ---
# Google: https://console.cloud.google.com > APIs & Services > Credentials
GOOGLE_CLIENT_ID=VOTRE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-VOTRE_SECRET
GOOGLE_CALLBACK_URL=https://api.luneo.app/api/v1/auth/google/callback

# GitHub: https://github.com/settings/developers
GITHUB_CLIENT_ID=VOTRE_CLIENT_ID
GITHUB_CLIENT_SECRET=VOTRE_SECRET
GITHUB_CALLBACK_URL=https://api.luneo.app/api/v1/auth/github/callback

# --- AI Providers [OBLIGATOIRE pour fonctionnalités AI] ---
# OpenAI: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-VOTRE_CLE_ICI
# Anthropic: https://console.anthropic.com
ANTHROPIC_API_KEY=sk-ant-VOTRE_CLE_ICI
# Replicate: https://replicate.com/account/api-tokens
REPLICATE_API_KEY=r8_VOTRE_CLE_ICI

# --- Monitoring [RECOMMANDE] ---
# Sentry: https://sentry.io > Projects > Settings > Client Keys
SENTRY_DSN=https://xxxx@xxxx.ingest.sentry.io/xxxx
SENTRY_ENVIRONMENT=production

# --- Security ---
BCRYPT_ROUNDS=12
SETUP_SECRET_KEY=45e87f519ca7d24ea7e80841fa9a2e8c8eb6b52247c319ec465d85fc73266fda

# Rate Limiting (actif en production)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
SLOW_DOWN_WINDOW_MS=900000
SLOW_DOWN_DELAY_AFTER=50
SLOW_DOWN_DELAY_MS=500

# CSRF
ENABLE_CSRF=true
ENABLE_RATE_LIMIT=true

# ============================================================================
# VARIABLES OPTIONNELLES
# ============================================================================

# AI Providers additionnels
MISTRAL_API_KEY=
MESHY_API_KEY=
RUNWAY_API_KEY=
STABILITY_API_KEY=
PIKA_LABS_API_TOKEN=
CSM_AI_API_TOKEN=
TINEYE_API_KEY=
GOOGLE_VISION_API_KEY=
REPLICATE_API_TOKEN=

# Stripe Add-ons
STRIPE_PRICE_PRO=
STRIPE_PRICE_BUSINESS=
STRIPE_PRICE_ENTERPRISE=
STRIPE_TRIAL_PERIOD_DAYS=14
STRIPE_ADDON_EXTRA_DESIGNS_PRODUCT_ID=
STRIPE_ADDON_EXTRA_DESIGNS_MONTHLY=
STRIPE_ADDON_EXTRA_DESIGNS_YEARLY=
STRIPE_ADDON_EXTRA_STORAGE_PRODUCT_ID=
STRIPE_ADDON_EXTRA_STORAGE_MONTHLY=
STRIPE_ADDON_EXTRA_STORAGE_YEARLY=
STRIPE_ADDON_EXTRA_TEAM_MEMBERS_PRODUCT_ID=
STRIPE_ADDON_EXTRA_TEAM_MEMBERS_MONTHLY=
STRIPE_ADDON_EXTRA_TEAM_MEMBERS_YEARLY=
STRIPE_ADDON_EXTRA_API_CALLS_PRODUCT_ID=
STRIPE_ADDON_EXTRA_API_CALLS_MONTHLY=
STRIPE_ADDON_EXTRA_API_CALLS_YEARLY=
STRIPE_ADDON_EXTRA_RENDERS_3D_PRODUCT_ID=
STRIPE_ADDON_EXTRA_RENDERS_3D_MONTHLY=
STRIPE_ADDON_EXTRA_RENDERS_3D_YEARLY=

# S3 Storage
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_BUCKET=luneo-ai-assets
S3_REGION=eu-west-1
S3_ENDPOINT=

# Email Domain
DOMAIN_VERIFIED=true
SPF_RECORD=
DKIM_RECORD=
DMARC_RECORD=

# Email Templates SendGrid
EMAIL_TEMPLATE_WELCOME=d-xxxxx
EMAIL_TEMPLATE_ORDER_CONFIRMATION=d-xxxxx
EMAIL_TEMPLATE_PRODUCTION_READY=d-xxxxx
EMAIL_TEMPLATE_PASSWORD_RESET=d-xxxxx
EMAIL_TEMPLATE_EMAIL_CONFIRMATION=d-xxxxx
EMAIL_TEMPLATE_INVOICE=d-xxxxx
EMAIL_TEMPLATE_NEWSLETTER=d-xxxxx

# Mailgun (alternative)
MAILGUN_API_KEY=
MAILGUN_DOMAIN=
MAILGUN_URL=

# Marketplace & Referral
MARKETPLACE_PLATFORM_FEE_PERCENT=30
MARKETPLACE_MIN_PAYOUT_CENTS=1000
MARKETPLACE_CONNECT_FEES_PERCENT=2
REFERRAL_COMMISSION_PERCENT=10
REFERRAL_COOKIE_DURATION_DAYS=30
REFERRAL_MIN_WITHDRAWAL_CENTS=5000

# Print-on-Demand
PRINTFUL_API_KEY=
PRINTIFY_API_KEY=
GELATO_API_KEY=

# Monitoring avancé
PROMETHEUS_ENABLED=false
AI_ALERTS_ENABLED=false
MONITORING_OPENTELEMETRY_ENABLED=false

# Upstash (REST - optionnel)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

NEXT_PUBLIC_APP_URL=https://luneo.app
