[build]
builder = "NIXPACKS"

[deploy]
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
# IMPORTANT: Railway Root Directory doit être configuré sur apps/backend
# Si Root Directory = apps/backend, utiliser:
startCommand = "node dist/src/main.js"
# Sinon, utiliser: startCommand = "cd apps/backend && node dist/src/main.js"

[env]
NODE_ENV = "production"
# PORT est fourni automatiquement par Railway via $PORT
# Ne pas définir PORT ici sauf si nécessaire pour une valeur spécifique
