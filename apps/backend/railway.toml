[build]
builder = "NIXPACKS"

[deploy]
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
# IMPORTANT: Railway Root Directory peut être '.' (racine) ou 'apps/backend'
# La commande de démarrage est gérée par le Dockerfile via /app/start.sh
# Le script /app/start.sh exécute les migrations Prisma automatiquement
# startCommand laissé vide pour utiliser le CMD du Dockerfile

[env]
NODE_ENV = "production"
# PORT est fourni automatiquement par Railway via $PORT